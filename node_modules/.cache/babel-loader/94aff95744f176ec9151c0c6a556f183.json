{"ast":null,"code":"var _jsxFileName = \"D:\\\\MIT Academy of Engineering\\\\Major Project\\\\Major_Project_Code\\\\supply-chain-dev\\\\src\\\\Services\\\\Contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport { useReducer, createContext, useEffect } from \"react\";\nimport { authReducuer } from \"../Reducers/AuthReducer\";\nimport { authStateEnableWeb3, authStateLogin, authStateFailed, authStateDisableWeb3, authStateLogout } from '../Actions/AuthActionCreator';\nimport Web3 from \"web3\";\nimport Toast from \"../../Components/Toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthContextProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [authState, authDispatch] = useReducer(authReducuer, {\n    isLoading: false,\n    errMess: null,\n    isWeb3Enabled: false,\n    isAuthenticated: false,\n    address: null,\n    formattedAddress: null,\n    stakeholder: {}\n  });\n  useEffect(() => {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      window.ethereum.enable();\n      authDispatch(authStateEnableWeb3());\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n      authDispatch(authStateEnableWeb3());\n    } else {\n      const errMess = \"Non-Ethereum browser detected\";\n      authDispatch(authStateFailed(errMess));\n      authDispatch(authStateDisableWeb3());\n      Toast(\"error\", errMess);\n      throw new Error(errMess);\n    }\n  }, []);\n  const connectWallet = async () => {\n    if (authState.isWeb3Enabled) {\n      try {\n        const selectedAccount = await window.ethereum.request({\n          method: \"eth_requestAccounts\"\n        }).then(accounts => accounts[0]).catch(() => {\n          Toast(\"error\", \"Please select an account\");\n        });\n        authDispatch(authStateLogin(selectedAccount));\n        Toast(\"success\", \"Successfully Logged in\");\n      } catch (error) {\n        Toast(\"error\", error.message);\n      }\n    }\n  };\n  const logout = () => {\n    try {\n      authDispatch(authStateLogout());\n      Toast(\"success\", \"Successfully Logged out\");\n    } catch (error) {\n      Toast(\"error\", error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      authState,\n      authDispatch,\n      connectWallet,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthContextProvider, \"tP+qtUEIoNE0WyKrKXgxmEs86ts=\");\n_c = AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["useReducer","createContext","useEffect","authReducuer","authStateEnableWeb3","authStateLogin","authStateFailed","authStateDisableWeb3","authStateLogout","Web3","Toast","jsxDEV","_jsxDEV","AuthContext","AuthContextProvider","_ref","_s","children","authState","authDispatch","isLoading","errMess","isWeb3Enabled","isAuthenticated","address","formattedAddress","stakeholder","window","ethereum","web3","enable","currentProvider","Error","connectWallet","selectedAccount","request","method","then","accounts","catch","error","message","logout","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/MIT Academy of Engineering/Major Project/Major_Project_Code/supply-chain-dev/src/Services/Contexts/AuthContext.js"],"sourcesContent":["import { useReducer, createContext, useEffect } from \"react\";\nimport { authReducuer } from \"../Reducers/AuthReducer\";\nimport { authStateEnableWeb3, authStateLogin, authStateFailed, authStateDisableWeb3, authStateLogout } from '../Actions/AuthActionCreator';\nimport Web3 from \"web3\";\nimport Toast from \"../../Components/Toast\";\n\nexport const AuthContext = createContext();\nexport const AuthContextProvider = ({children}) => {\n  const [authState, authDispatch] = useReducer(authReducuer, {\n    isLoading: false,\n    errMess: null,\n    isWeb3Enabled: false,\n    isAuthenticated: false,\n    address: null,\n    formattedAddress: null,\n    stakeholder: {}\n  })\n\n  useEffect(() => {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      window.ethereum.enable();\n      authDispatch(authStateEnableWeb3());\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n      authDispatch(authStateEnableWeb3());\n    }\n    else {\n      const errMess = \"Non-Ethereum browser detected\";\n      authDispatch(authStateFailed(errMess));\n      authDispatch(authStateDisableWeb3());\n      Toast(\"error\", errMess);\n      throw new Error(errMess);\n    }\n  }, [])\n\n\n  const connectWallet = async () => {\n    if(authState.isWeb3Enabled) {\n      try {\n        const selectedAccount = await window.ethereum\n        .request({\n          method: \"eth_requestAccounts\",\n        })\n        .then((accounts) => accounts[0])\n        .catch(() => {\n          Toast(\"error\", \"Please select an account\");\n        });\n        authDispatch(authStateLogin(selectedAccount));\n        Toast(\"success\", \"Successfully Logged in\");\n      } catch( error ) {\n        Toast(\"error\", error.message);\n      }\n    }\n  }\n\n  const logout = () => {\n    try{\n      authDispatch(authStateLogout());\n      Toast(\"success\", \"Successfully Logged out\");\n    } catch( error ){\n      Toast(\"error\", error.message);\n    }\n  }\n\n  return (\n    <AuthContext.Provider value={{authState, authDispatch, connectWallet, logout}}>\n      {children}\n    </AuthContext.Provider>\n  )\n}"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,aAAa,EAAEC,SAAS,QAAQ,OAAO;AAC5D,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,mBAAmB,EAAEC,cAAc,EAAEC,eAAe,EAAEC,oBAAoB,EAAEC,eAAe,QAAQ,8BAA8B;AAC1I,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,KAAK,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,OAAO,MAAMC,WAAW,gBAAGZ,aAAa,EAAE;AAC1C,OAAO,MAAMa,mBAAmB,GAAGC,IAAA,IAAgB;EAAAC,EAAA;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAF,IAAA;EAC5C,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGnB,UAAU,CAACG,YAAY,EAAE;IACzDiB,SAAS,EAAE,KAAK;IAChBC,OAAO,EAAE,IAAI;IACbC,aAAa,EAAE,KAAK;IACpBC,eAAe,EAAE,KAAK;IACtBC,OAAO,EAAE,IAAI;IACbC,gBAAgB,EAAE,IAAI;IACtBC,WAAW,EAAE,CAAC;EAChB,CAAC,CAAC;EAEFxB,SAAS,CAAC,MAAM;IACd,IAAIyB,MAAM,CAACC,QAAQ,EAAE;MACnBD,MAAM,CAACE,IAAI,GAAG,IAAIpB,IAAI,CAACkB,MAAM,CAACC,QAAQ,CAAC;MACvCD,MAAM,CAACC,QAAQ,CAACE,MAAM,EAAE;MACxBX,YAAY,CAACf,mBAAmB,EAAE,CAAC;IACrC,CAAC,MACI,IAAIuB,MAAM,CAACE,IAAI,EAAE;MACpBF,MAAM,CAACE,IAAI,GAAG,IAAIpB,IAAI,CAACkB,MAAM,CAACE,IAAI,CAACE,eAAe,CAAC;MACnDZ,YAAY,CAACf,mBAAmB,EAAE,CAAC;IACrC,CAAC,MACI;MACH,MAAMiB,OAAO,GAAG,+BAA+B;MAC/CF,YAAY,CAACb,eAAe,CAACe,OAAO,CAAC,CAAC;MACtCF,YAAY,CAACZ,oBAAoB,EAAE,CAAC;MACpCG,KAAK,CAAC,OAAO,EAAEW,OAAO,CAAC;MACvB,MAAM,IAAIW,KAAK,CAACX,OAAO,CAAC;IAC1B;EACF,CAAC,EAAE,EAAE,CAAC;EAGN,MAAMY,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAGf,SAAS,CAACI,aAAa,EAAE;MAC1B,IAAI;QACF,MAAMY,eAAe,GAAG,MAAMP,MAAM,CAACC,QAAQ,CAC5CO,OAAO,CAAC;UACPC,MAAM,EAAE;QACV,CAAC,CAAC,CACDC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC/BC,KAAK,CAAC,MAAM;UACX7B,KAAK,CAAC,OAAO,EAAE,0BAA0B,CAAC;QAC5C,CAAC,CAAC;QACFS,YAAY,CAACd,cAAc,CAAC6B,eAAe,CAAC,CAAC;QAC7CxB,KAAK,CAAC,SAAS,EAAE,wBAAwB,CAAC;MAC5C,CAAC,CAAC,OAAO8B,KAAK,EAAG;QACf9B,KAAK,CAAC,OAAO,EAAE8B,KAAK,CAACC,OAAO,CAAC;MAC/B;IACF;EACF,CAAC;EAED,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnB,IAAG;MACDvB,YAAY,CAACX,eAAe,EAAE,CAAC;MAC/BE,KAAK,CAAC,SAAS,EAAE,yBAAyB,CAAC;IAC7C,CAAC,CAAC,OAAO8B,KAAK,EAAE;MACd9B,KAAK,CAAC,OAAO,EAAE8B,KAAK,CAACC,OAAO,CAAC;IAC/B;EACF,CAAC;EAED,oBACE7B,OAAA,CAACC,WAAW,CAAC8B,QAAQ;IAACC,KAAK,EAAE;MAAC1B,SAAS;MAAEC,YAAY;MAAEc,aAAa;MAAES;IAAM,CAAE;IAAAzB,QAAA,EAC3EA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACY;AAE3B,CAAC;AAAAhC,EAAA,CAhEYF,mBAAmB;AAAAmC,EAAA,GAAnBnC,mBAAmB;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}